(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1397:function(e,n,t){"use strict";t.r(n);var a=t(1473),o=t(1479),l=t(1475),i=t(1474),s=t(1381),r=t(4),u=t(110),d=t(0),c=t.n(d),p=t(10),m=t(1478),T=t(1477),D=t(17);const g=function(){return t(652)};var k={commit:function(e,n,t,a,o){return Object(p.commitMutation)(e,{mutation:g,variables:{input:{ToDo_Complete:a},status:o},updater(e){const t=e.get(n.id),a=D.ConnectionHandler.getConnection(t,"ToDoList_ToDos",{status:o}),l=e.getRootField("ToDoListUpdateMarkAll").getLinkedRecord("Viewer").getLinkedRecord("ToDos",{status:o}).getLinkedRecords("edges");a.setLinkedRecords(l,"edges")},optimisticUpdater(e){const t=e.get(n.id),l=D.ConnectionHandler.getConnection(t,"ToDoList_ToDos",{status:o});(a&&"active"===o||!a&&"completed"===o)&&l.setLinkedRecords([],"edges")},optimisticResponse(){const e={Viewer:{id:n.id,ToDo_CompletedCount:0},changedToDos:null};return t&&t.edges&&(e.changedToDos=t.edges.filter(({node:e})=>e.ToDo_Complete!==a).map(({node:e})=>({id:e.id,ToDo_Complete:a}))),a?null!=n.ToDo_TotalCount&&(e.Viewer.ToDo_CompletedCount=n.ToDo_TotalCount):e.Viewer.ToDo_CompletedCount=0,{ToDoListUpdateMarkAll:e}}})}},_=t(1386),h=t(1384),C=t(1476),y=t(1470),F=t(621),f=t(1467),b=t(612),K=t.n(b);const L=function(){return t(653)};function V(e,n,t){const a=e.get(n.id),o=t.getValue("ToDo_Complete")?"active":"completed",l=D.ConnectionHandler.getConnection(a,"ToDoList_ToDos",{status:o});l&&D.ConnectionHandler.deleteNode(l,t.getValue("id"))}var S={commit:function(e,n,t,a){return Object(p.commitMutation)(e,{mutation:L,variables:{input:{id:t.id,ToDo_Complete:a}},updater(e){const t=e.getRootField("ToDoUpdateStatus");V(e,n,t.getLinkedRecord("ToDo"))},optimisticUpdater(e){const o=e.get(t.id);o.setValue(a,"complete"),V(e,n,o);const l=e.get(n.id),i=l.getValue("ToDo_CompletedCount");null!=i&&l.setValue(i+(a?1:-1),"ToDo_CompletedCount")}})}};const M=function(){return t(654)};function v(e,n,t){const a=e.get(n.id);["any","active","completed"].forEach(e=>{const n=D.ConnectionHandler.getConnection(a,"ToDoList_ToDos",{status:e});n&&D.ConnectionHandler.deleteNode(n,t)})}var E={commit:function(e,n,t){return Object(p.commitMutation)(e,{mutation:M,variables:{input:{id:t.id}},updater(e){const t=e.getRootField("ToDoDelete");v(e,n,t.getValue("deletedId"))},optimisticUpdater(e){v(e,n,t.id);const a=e.get(n.id),o=a.getValue("ToDo_TotalCount");null!=o&&a.setValue(o-1,"ToDo_TotalCount");const l=a.getValue("ToDo_CompletedCount");null!=l&&(null!=t.ToDo_Complete?t.ToDo_Complete&&a.setValue(l-1,"ToDo_CompletedCount"):null!=o&&o-1<l&&a.setValue(o-1,"ToDo_CompletedCount"))}})}};const U=function(){return t(655)};var w={commit:function(e,n,t){return Object(p.commitMutation)(e,{mutation:U,variables:{input:{id:n.id,ToDo_Text:t}},optimisticResponse:()=>({ToDoUpdateRename:{ToDo:{id:n.id,ToDo_Text:t}}})})}},x=t(54),I=t(1370),R=t(1383),O=t(1372),A=t(1371),P=t(301);var $=Object(r.a)(e=>({container:{display:"flex",flexWrap:"wrap"}}))(class extends c.a.Component{constructor(e,n){super(e,n),this._handle_Close=()=>{this.props.handlerClose()},this._handle_OK=()=>{this.props.handlerUpdate({ToDo_Text:this.state.ToDo_Text}),this.props.handlerClose()};const{ToDo_Text:t}=this.props;this.state={ToDo_Text:t}}render(){const{ToDo_Text:e}=this.state;return c.a.createElement("div",null,c.a.createElement(I.a,{open:this.props.open,onClose:this._handle_Close},c.a.createElement(A.a,null,"ToDo"),c.a.createElement(O.a,null,c.a.createElement(P.a,{label:"To Do",fullWidth:!0,value:e,onChange:e=>this.setState({ToDo_Text:e.target.value})})),c.a.createElement(R.a,null,c.a.createElement(x.a,{onClick:this._handle_Close},"Cancel"),c.a.createElement(x.a,{onClick:this._handle_OK,color:"primary"},"OK"))))}});var j=Object(p.createFragmentContainer)(class extends c.a.Component{constructor(e,n){super(e,n),this._handle_onClickCheckbox=(e,n)=>{const{relay:t,Viewer:a,ToDo:o}=this.props;S.commit(t.environment,a,o,n)},this._handle_Update_Properties=e=>{const{relay:n,ToDo:t}=this.props;w.commit(n.environment,t,e.ToDo_Text)},this._handle_Close_Properties=()=>{this.setState({propertiesIsOpen:!1})},this.handleClickListItem=e=>{this.setState({menuIsOpen:!0,anchorEl:e.currentTarget})},this._handle_Menu_onClick_Edit=e=>{this.setState({menuIsOpen:!1,propertiesIsOpen:!0})},this._handle_Menu_onClick_Delete=e=>{this.setState({menuIsOpen:!1});const{relay:n,Viewer:t,ToDo:a}=this.props;E.commit(n.environment,t,a)},this.handleRequestClose=()=>{this.setState({menuIsOpen:!1})},this.state={anchorEl:void 0,menuIsOpen:!1,propertiesIsOpen:!1}}render(){const{ToDo_Complete:e,ToDo_Text:n}=this.props.ToDo;return c.a.createElement("div",null,c.a.createElement(h.a,{button:!0,"aria-haspopup":"true","aria-controls":"lock-menu",onClick:n=>this._handle_onClickCheckbox(n,!e)},c.a.createElement(o.a,{checked:e}),c.a.createElement(y.a,{primary:n}),c.a.createElement(C.a,null,c.a.createElement(_.a,{onClick:this.handleClickListItem},c.a.createElement(K.a,null)))),c.a.createElement(F.a,{id:"lock-menu",anchorEl:this.state.anchorEl,open:this.state.menuIsOpen,onClose:this.handleRequestClose},c.a.createElement(f.a,{key:"edit",onClick:e=>this._handle_Menu_onClick_Edit(e)},"Edit"),c.a.createElement(f.a,{key:"delete",onClick:e=>this._handle_Menu_onClick_Delete(e)},"Delete")),c.a.createElement($,{ToDo_Text:n,handlerUpdate:this._handle_Update_Properties,handlerClose:this._handle_Close_Properties,open:this.state.propertiesIsOpen}))}},{Viewer:function(){return t(656)},ToDo:function(){return t(657)}});n.default=Object(p.createFragmentContainer)(Object(r.a)(e=>({}))(Object(u.withRouter)(class extends c.a.Component{constructor(...e){var n;return n=super(...e),this._handle_onClick_MarkAll=(e,n)=>{const{match:t,relay:a,Viewer:o}=this.props,{status:l}=t.params,i=n;k.commit(a.environment,o,o.ToDos,i,l)},this._handle_onChange=(e,n)=>{const{router:t}=this.props,a=2===n?"/todo/completed":1===n?"/todo/active":"/todo";t.push(a)},n}renderTabs(){const{match:e}=this.props,{status:n}=e.params,t="active"===n?1:"completed"===n?2:0;return c.a.createElement(a.a,{position:"static"},c.a.createElement(m.a,{value:t,onChange:this._handle_onChange},c.a.createElement(T.a,{label:"All"}),c.a.createElement(T.a,{label:"Active"}),c.a.createElement(T.a,{label:"Completed"})))}render(){const{Viewer:e}=this.props,{ToDos:n,ToDo_TotalCount:t,ToDo_CompletedCount:a}=e;return t?c.a.createElement("div",null,this.renderTabs(),c.a.createElement(l.a,{row:!0},c.a.createElement(i.a,{control:c.a.createElement(o.a,{checked:t===a,onChange:this._handle_onClick_MarkAll}),label:"Mark all as complete"})),c.a.createElement(s.a,null,n.edges.map(({node:n})=>c.a.createElement(j,{key:n.id,Viewer:e,ToDo:n})))):null}})),{Viewer:function(){return t(658)}})},652:function(e,n,t){"use strict";const a={kind:"Request",fragment:{kind:"Fragment",name:"ToDoListUpdateMarkAllMutation",type:"Mutation",metadata:null,argumentDefinitions:o=[{kind:"LocalArgument",name:"input",type:"ToDoListUpdateMarkAllInput!",defaultValue:null},{kind:"LocalArgument",name:"status",type:"String!",defaultValue:null}],selections:s=[{kind:"LinkedField",alias:null,name:"ToDoListUpdateMarkAll",storageKey:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ToDoListUpdateMarkAllPayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"Viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"ToDos",storageKey:null,args:[{kind:"Variable",name:"status",variableName:"status"}],concreteType:"ToDosConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ToDosEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"ToDo",plural:!1,selections:[l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"ToDo_Complete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_Text",args:null,storageKey:null}]}]}]},l,{kind:"ScalarField",alias:null,name:"ToDo_CompletedCount",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"changedToDos",storageKey:null,args:null,concreteType:"ToDo",plural:!0,selections:[l,i]}]}]},operation:{kind:"Operation",name:"ToDoListUpdateMarkAllMutation",argumentDefinitions:o,selections:s},params:{operationKind:"mutation",name:"ToDoListUpdateMarkAllMutation",id:null,text:"mutation ToDoListUpdateMarkAllMutation(\n  $input: ToDoListUpdateMarkAllInput!\n  $status: String!\n) {\n  ToDoListUpdateMarkAll(input: $input) {\n    Viewer {\n      ToDos(status: $status) {\n        edges {\n          node {\n            id\n            ToDo_Complete\n            ToDo_Text\n          }\n        }\n      }\n      id\n      ToDo_CompletedCount\n    }\n    changedToDos {\n      id\n      ToDo_Complete\n    }\n  }\n}\n",metadata:{}}};var o,l,i,s;a.hash="18b2dc6ec26946a22a0803be1ba1d2f2",e.exports=a},653:function(e,n,t){"use strict";const a={kind:"Request",fragment:{kind:"Fragment",name:"ToDoUpdateStatusMutation",type:"Mutation",metadata:null,argumentDefinitions:o=[{kind:"LocalArgument",name:"input",type:"ToDoUpdateStatusInput!",defaultValue:null}],selections:i=[{kind:"LinkedField",alias:null,name:"ToDoUpdateStatus",storageKey:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ToDoUpdateStatusPayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"Viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_CompletedCount",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"ToDo",storageKey:null,args:null,concreteType:"ToDo",plural:!1,selections:[l,{kind:"ScalarField",alias:null,name:"ToDo_Complete",args:null,storageKey:null}]}]}]},operation:{kind:"Operation",name:"ToDoUpdateStatusMutation",argumentDefinitions:o,selections:i},params:{operationKind:"mutation",name:"ToDoUpdateStatusMutation",id:null,text:"mutation ToDoUpdateStatusMutation(\n  $input: ToDoUpdateStatusInput!\n) {\n  ToDoUpdateStatus(input: $input) {\n    Viewer {\n      id\n      ToDo_CompletedCount\n    }\n    ToDo {\n      id\n      ToDo_Complete\n    }\n  }\n}\n",metadata:{}}};var o,l,i;a.hash="05dd206726300c3f5a9866475072d101",e.exports=a},654:function(e,n,t){"use strict";const a={kind:"Request",fragment:{kind:"Fragment",name:"ToDoDeleteMutation",type:"Mutation",metadata:null,argumentDefinitions:o=[{kind:"LocalArgument",name:"input",type:"ToDoDeleteInput!",defaultValue:null}],selections:[{kind:"LinkedField",alias:null,name:"ToDoDelete",storageKey:null,args:l=[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ToDoDeletePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"Viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[i={kind:"ScalarField",alias:null,name:"ToDo_TotalCount",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"ToDo_CompletedCount",args:null,storageKey:null}]},r={kind:"ScalarField",alias:null,name:"deletedId",args:null,storageKey:null}]}]},operation:{kind:"Operation",name:"ToDoDeleteMutation",argumentDefinitions:o,selections:[{kind:"LinkedField",alias:null,name:"ToDoDelete",storageKey:null,args:l,concreteType:"ToDoDeletePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"Viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[i,s,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},r]}]},params:{operationKind:"mutation",name:"ToDoDeleteMutation",id:null,text:"mutation ToDoDeleteMutation(\n  $input: ToDoDeleteInput!\n) {\n  ToDoDelete(input: $input) {\n    Viewer {\n      ToDo_TotalCount\n      ToDo_CompletedCount\n      id\n    }\n    deletedId\n  }\n}\n",metadata:{}}};var o,l,i,s,r;a.hash="a581035e0f38d5d8ad86368e6420b22c",e.exports=a},655:function(e,n,t){"use strict";const a={kind:"Request",fragment:{kind:"Fragment",name:"ToDoUpdateRenameMutation",type:"Mutation",metadata:null,argumentDefinitions:o=[{kind:"LocalArgument",name:"input",type:"ToDoUpdateRenameInput!",defaultValue:null}],selections:l=[{kind:"LinkedField",alias:null,name:"ToDoUpdateRename",storageKey:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ToDoUpdateRenamePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"ToDo",storageKey:null,args:null,concreteType:"ToDo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_Text",args:null,storageKey:null}]}]}]},operation:{kind:"Operation",name:"ToDoUpdateRenameMutation",argumentDefinitions:o,selections:l},params:{operationKind:"mutation",name:"ToDoUpdateRenameMutation",id:null,text:"mutation ToDoUpdateRenameMutation(\n  $input: ToDoUpdateRenameInput!\n) {\n  ToDoUpdateRename(input: $input) {\n    ToDo {\n      id\n      ToDo_Text\n    }\n  }\n}\n",metadata:{}}};var o,l;a.hash="5ca316bc08f370bba86945985652a644",e.exports=a},656:function(e,n,t){"use strict";const a={kind:"Fragment",name:"ToDoItem_Viewer",type:"Viewer",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}],hash:"1a7d80a3304bcbe9332edd571759ed60"};e.exports=a},657:function(e,n,t){"use strict";const a={kind:"Fragment",name:"ToDoItem_ToDo",type:"ToDo",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_Complete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_Text",args:null,storageKey:null}],hash:"b4582da6b8371980f5147d0ea118c859"};e.exports=a},658:function(e,n,t){"use strict";const a={kind:"Fragment",name:"ToDoList_Viewer",type:"Viewer",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["ToDos"]}]},argumentDefinitions:[{kind:"RootArgument",name:"status",type:"String"}],selections:[{kind:"LinkedField",alias:"ToDos",name:"__ToDoList_ToDos_connection",storageKey:null,args:[{kind:"Variable",name:"status",variableName:"status"}],concreteType:"ToDosConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ToDosEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"ToDo",plural:!1,selections:[o={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_Complete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"ToDoItem_ToDo",args:null}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]}]},o,{kind:"ScalarField",alias:null,name:"ToDo_TotalCount",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"ToDo_CompletedCount",args:null,storageKey:null},{kind:"FragmentSpread",name:"ToDoItem_Viewer",args:null}]};var o;a.hash="68b5216db9d5b129661a98b5e2476770",e.exports=a}}]);