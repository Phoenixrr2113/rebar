{"version":3,"sources":["../../../../units/rb-account-management-webapp/components/NavBarAccountButton.jsx"],"names":["styles","NavBarAccountButton","React","Component","constructor","props","context","_handle_onClick_Login","setState","loginDialogIsOpen","userMenuIsOpen","_handle_onClick_Profile","router","push","_handle_Login_Close","_handle_onClick_UserMenu","event","anchorEl","currentTarget","_handle_UserMenu_Close","_handle_onClick_Logout","_handle_Login_NewUser","state","undefined","UNSAFE_componentWillMount","componentWillUnmount","render","Viewer","User_IsAnonymous","User_DisplayName"],"mappings":"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","sourcesContent":["// @flow\n\nimport { withRouter } from 'found'\nimport IconButton from '@material-ui/core/IconButton'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconAccount from 'mdi-material-ui/Account'\nimport IconAccountOutline from 'mdi-material-ui/AccountOutline'\nimport React from 'react'\nimport { createFragmentContainer, graphql } from 'react-relay'\nimport {\n  registerAuthenticationRequiredCallback,\n  unregisterAuthenticationRequiredCallback,\n} from './RequiresAuthentication'\nimport LoginDialog from './LoginDialog'\n\n//\n\nconst styles = {}\n\n//\n\nclass NavBarAccountButton extends React.Component<\n  {\n    Viewer: Object,\n    relay: Object,\n    router: Object,\n  },\n  {\n    anchorEl: ?Object,\n    loginDialogIsOpen: boolean,\n    userMenuIsOpen: boolean,\n  },\n> {\n  constructor(props: Object, context: Object) {\n    super(props, context)\n\n    this.state = {\n      anchorEl: undefined,\n      loginDialogIsOpen: false,\n      userMenuIsOpen: false,\n    }\n  }\n\n  // Handle popping open the login dialog if authentication is required\n  UNSAFE_componentWillMount() {\n    registerAuthenticationRequiredCallback(this._handle_onClick_Login)\n  }\n\n  componentWillUnmount() {\n    unregisterAuthenticationRequiredCallback()\n  }\n\n  _handle_onClick_Login = () => {\n    this.setState({ loginDialogIsOpen: true, userMenuIsOpen: false })\n  }\n\n  _handle_onClick_Profile = () => {\n    this.setState({ userMenuIsOpen: false })\n\n    this.props.router.push('/user/profile')\n  }\n\n  _handle_Login_Close = () => {\n    this.setState({ loginDialogIsOpen: false })\n  }\n\n  _handle_onClick_UserMenu = (event) => {\n    this.setState({ userMenuIsOpen: true, anchorEl: event.currentTarget })\n  }\n\n  _handle_UserMenu_Close = () => {\n    this.setState({ userMenuIsOpen: false })\n  }\n\n  _handle_onClick_Logout = () => {\n    this.setState({ userMenuIsOpen: false })\n    this.props.router.push('/user/logout')\n  }\n\n  _handle_Login_NewUser = () => {\n    this.setState({ loginDialogIsOpen: false })\n\n    this.props.router.push('/user/new')\n  }\n\n  render() {\n    const { Viewer } = this.props\n    const { User_IsAnonymous, User_DisplayName } = Viewer\n    const { loginDialogIsOpen, userMenuIsOpen } = this.state\n\n    return (\n      <div>\n        <IconButton\n          aria-haspopup=\"true\"\n          component=\"div\"\n          onClick={\n            User_IsAnonymous ? (\n              this._handle_onClick_Login\n            ) : (\n              this._handle_onClick_UserMenu\n            )\n          }\n          color=\"inherit\"\n        >\n          {User_IsAnonymous ? <IconAccountOutline /> : <IconAccount />}\n        </IconButton>\n\n        <LoginDialog\n          open={loginDialogIsOpen}\n          handlerClose={this._handle_Login_Close}\n          handlerNewUser={this._handle_Login_NewUser}\n        />\n\n        <Menu\n          id=\"lock-menu\"\n          anchorEl={this.state.anchorEl}\n          open={userMenuIsOpen}\n          onClose={this._handle_UserMenu_Close}\n        >\n          <MenuItem\n            component=\"div\"\n            key=\"profile\"\n            onClick={this._handle_onClick_Profile}\n          >\n            {User_DisplayName}\n          </MenuItem>\n          <MenuItem\n            component=\"div\"\n            key=\"login\"\n            onClick={this._handle_onClick_Login}\n          >\n            Change user\n          </MenuItem>\n          <MenuItem\n            component=\"div\"\n            key=\"logout\"\n            onClick={this._handle_onClick_Logout}\n          >\n            Log out\n          </MenuItem>\n        </Menu>\n      </div>\n    )\n  }\n}\n\nexport default createFragmentContainer(\n  withStyles(styles)(withRouter(NavBarAccountButton)),\n  {\n    Viewer: graphql`\n      fragment NavBarAccountButton_Viewer on Viewer {\n        User_IsAnonymous\n        User_DisplayName\n      }\n    `,\n  },\n)\n"],"file":"NavBarAccountButton.js"}